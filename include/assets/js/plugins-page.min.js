function inesonicSpeedSentryIsValidAccessCode(a){let isValid=false;let commaIndex=a.indexOf(",");if(commaIndex>0){let cid=a.substring(0,commaIndex);let secret=a.substring(commaIndex+1);isValid=(cid.match(/^[a-zA-Z0-9]{16}$/)&&secret.match(/^[a-zA-Z0-9+/]{75}=$/))}return isValid}function inesonicSpeedSentryToggleManualConfiguration(){let areaRow=jQuery("#inesonic-speedsentry-configuration-area-row");if(areaRow.hasClass("inesonic-row-hidden")){areaRow.prop("class","inesonic-speedsentry-configuration-area-row inesonic-row-visible")}else{areaRow.prop("class","inesonic-speedsentry-configuration-area-row inesonic-row-hidden")}}function inesonicSpeedSentryValidateAccessCode(){let inputField=jQuery("#inesonic-speedsentry-mc-input");let submitButton=jQuery("#inesonic-speedsentry-mc-submit-button");let accessCode=inputField.val();if(inesonicSpeedSentryIsValidAccessCode(accessCode)){inputField.prop("class","inesonic-speedsentry-mc-input inesonic-speedsentry-input-valid");submitButton.removeClass("inesonic-speedsentry-anchor-disable");submitButton.addClass("inesonic-speedsentry-anchor-enable")}else{inputField.prop("class","inesonic-speedsentry-mc-input inesonic-speedsentry-input-invalid");submitButton.addClass("inesonic-speedsentry-anchor-disable");submitButton.removeClass("inesonic-speedsentry-anchor-enable")}}function inesonicSpeedSentryBroadcastCapabilityChange(a){jQuery("#inesonic-speedsentry-capabilities").trigger("inesonic-speedsentry-capabilities-changed",[a])}function inesonicSpeedSentryAccessCodeSubmit(){let inputField=jQuery("#inesonic-speedsentry-mc-input");let submitButton=jQuery("#inesonic-speedsentry-mc-submit-button");let accessCode=inputField.val();if(inesonicSpeedSentryIsValidAccessCode(accessCode)){let commaIndex=accessCode.indexOf(",");if(commaIndex>0){let cid=accessCode.substring(0,commaIndex);let secret=accessCode.substring(commaIndex+1);inesonicSpeedSentryLastCapabilities=null;jQuery.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"inesonic_speedsentry_access_codes",cid:cid,secret:secret},dataType:"json",success:function(a){if(a!==null&&a.status=="OK"){jQuery.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"inesonic_speedsentry_get_capabilities"},dataType:"json",success:function(b){if(b!=null&&b.status=="OK"){let capabilities=b.capabilities;inesonicSpeedSentryLastCapabilities=capabilities;inesonicSpeedSentryBroadcastCapabilityChange(capabilities);if(capabilities!==null){window.location.reload()}}},error:function(b,d,c){inesonicSpeedSentryBroadcastCapabilityChange(null);console.log("Could not determine status: "+c)}})}else{alert("Status failed")}},error:function(a,c,b){inesonicSpeedSentryBroadcastCapabilityChange(null);console.log("Could not update access codes: "+b)}})}}}jQuery(document).ready(function(a){a("#inesonic-speedsentry-mc-link").click(function(b){inesonicSpeedSentryToggleManualConfiguration()});a("#inesonic-speedsentry-mc-input").on("change keyup paste",function(){inesonicSpeedSentryValidateAccessCode()});let submitButton=a("#inesonic-speedsentry-mc-submit-button");submitButton.addClass("inesonic-speedsentry-anchor-disable");submitButton.click(function(b){inesonicSpeedSentryAccessCodeSubmit()});inesonicSpeedSentryValidateAccessCode()});